generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String            @id @default(cuid())
  email            String            @unique
  password         String
  name             String
  role             UserRole
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  adminProfile     AdminProfile?
  assistantProfile AssistantProfile?
  viewerProfile    ViewerProfile?

  @@index([email])
}

model AdminProfile {
  id           String            @id @default(cuid())
  userId       String            @unique
  bio          String?
  department   String?
  profileImage String?
  phoneNumber  String?
  permissions  AdminPermission[]
  createdAt    DateTime          @default(now())
  updatedAt    DateTime          @updatedAt
  user         User              @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model AssistantProfile {
  id            String                @id @default(cuid())
  userId        String                @unique
  bio           String?
  department    String?
  profileImage  String?
  assignedTasks String[]
  permissions   AssistantPermission[]
  createdAt     DateTime              @default(now())
  updatedAt     DateTime              @updatedAt
  user          User                  @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model ViewerProfile {
  id           String   @id @default(cuid())
  userId       String   @unique
  bio          String?
  profileImage String?
  accessLevel  String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

enum UserRole {
  Admin
  Assistant
  Viewer
}

enum AdminPermission {
  manage_users
  manage_content
  view_analytics
  manage_settings
  delete_data
}

enum AssistantPermission {
  edit_content
  view_analytics
  moderate_content
}
